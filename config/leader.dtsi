/*
leader
/*                                      42 KEY MATRIX / LAYOUT MAPPING

  ╭────────────────────────┬────────────────────────╮ 
  │  0   1   2   3   4   5 │  6   7   8   9  10  11 │ 
  │ 12  13  14  15  16  17 │ 18  19  20  21  22  23 │ 
  │ 24  25  26  27  28  29 │ 30  31  32  33  34  35 │ 
  ╰───────────╮ 36  37  38 │ 39  40  41 ╭───────────╯ 
              ╰────────────┴────────────╯             */

#pragma once

#define _B  5  // left-top row
#define _P  4
#define _F  3
#define _W  2
#define _FSLASH  1
#define _ESC  0
#define _J  6  // right-top row
#define _L  7
#define _U  8
#define _Y  9
#define _SEMI 10
#define _G 17  // left-middle row
#define _T 16
#define _S 15
#define _R 14
#define _A 13
#define _TAB 12
#define _M 18  // right-middle row
#define _N 19
#define _E 20
#define _I 21
#define _O 22
#define _V 29  // left-bottom row
#define _D 28
#define _C 27
#define _X 26
#define _Z 25
#define _K 30  // right-bottom row
#define _H 31
#define _COMMA 32
#define _DOT 33
#define _Q 34


#define LEADER(NAME, KEYS, BINDINGS, LAYERS) \
    leader_##NAME { \
        key-positions = <KEYS>; \
        bindings = <BINDINGS>; \
        layers = <LAYERS>; \
        immediate-trigger; \
    };

#define MACRO_MAKER(NAME, SEQUENCE) \
    ZMK_BEHAVIOR(NAME, macro, \
        bindings = <&macro_tap SEQUENCE>; \
    )

MACRO_MAKER(test, &kp T &kp E &kp S &kp T)

/{ 
    leader_sequences {
        compatible = "zmk,leader-sequences";
        LEADER(close, _E _X _I _T, &kp LA(F4), DEF)

        //  buildProjects:
        LEADER(newInThisDirectory, _N _B _D, lc(la(INS)), DEF)
        LEADER(buildProject, _B _D, lc(F9), DEF)
        LEADER(rebuild, _R _B _D, lc(ls(F9)), DEF)
        
        //  basicEditing:
            // LEADER(cut, , lc(X), DEF)
            // LEADER(copy, , lc(C), DEF)
            // LEADER(paste, , lc(V), DEF)
        LEADER(pasteAsPlainText, _P _T, lc(la(ls(V))), DEF)
        LEADER(pasteFromHistory, _P _H, lc(ls(V)), DEF)
        LEADER(copyPaths, _C _P, lc(ls(C)), DEF)
        LEADER(copyReference, _C _R, lc(la(ls(C))), DEF)
            // LEADER(saveAll, , lc(S), DEF)
            // LEADER(undo, , lc(Z), DEF)
            // LEADER(redo, , lc(ls(Z)), DEF)
            // LEADER(indentSelection, , TAB, DEF)
            // LEADER(unindentLineOrSelection, , ls(TAB), DEF)
        LEADER(autoIndentLines, _A _I _L, lc(la(I)), DEF)
        LEADER(startNewLine, _N _L _N, ls(ENTER), DEF)
        LEADER(startNewLineBeforeCurrent, _N _L _P, lc(la(ENTER)), DEF)
        LEADER(deleteLine, _D _L, lc(Y), DEF)
        LEADER(joinLines, _J _L, lc(ls(J)), DEF)
        LEADER(duplicateLineOrSelection, _D _P _L, lc(D), DEF)
        LEADER(toggleCase, _T _C, lc(ls(U)), DEF)
        LEADER(scratchFile, _S _F, lc(la(ls(INS))), DEF)
        LEADER(openSourceInNewWindow, _O _S _N, ls(F4), DEF)
        LEADER(increaseFontSizeInAllEditors _I _F, , la(ls(DOT)), DEF)
        LEADER(decreaseFontSizeInAllEditors _D _F, , la(ls(COMMA)), DEF)
        
        //  caretNavigation:
            // LEADER(moveCaretToPreviousWord, , lc(LEFT), DEF)
            // LEADER(moveCaretToNextWord, , lc(RIGHT), DEF)
            // LEADER(moveCaretToLineStart, , HOME, DEF)
            // LEADER(moveCaretToLineEnd, , END, DEF)
        LEADER(moveCaretToMatchingBrace, _M _B, lc(ls(M)), DEF)
        LEADER(moveCaretToCodeBlockStart, _B _S, lc(LBKT), DEF)
        LEADER(moveCaretToCodeBlockEnd, _B _E, lc(RBKT), DEF)
        LEADER(nextMethod, _N _M, la(DOWN), DEF)
        LEADER(previousMethod, _p _M, la(UP), DEF)
            // LEADER(moveCaretToPageTop, _M _P _T, lc(PG_UP), DEF)
            // LEADER(moveCaretToPageBottom _M _P _B, , lc(PG_DN), DEF)
            // LEADER(pageUp, , PG_UP, DEF)
            // LEADER(pageDown, , PG_DN, DEF)
            // LEADER(moveCaretToTextStart, , lc(HOME), DEF)
            // LEADER(moveCaretToTextEnd, , lc(END), DEF)
        
        //  selectText:
        // LEADER(selectAll, , lc(A), DEF)
            // LEADER(leftWithSelection, , ls(LEFT), DEF)
            // LEADER(rightWithSelection, , ls(RIGHT), DEF)
            // LEADER(moveCaretToPreviousWordWithSelection, , lc(ls(LEFT)), DEF)
            // LEADER(moveCaretToNextWordWithSelection, , lc(ls(RIGHT)), DEF)
            // LEADER(moveCaretToLineStartWithSelection, , ls(HOME), DEF)
            // LEADER(moveCaretToLineEndWithSelection, , ls(END), DEF)
            // LEADER(upWithSelection, , ls(UP), DEF)
            // LEADER(downWithSelection, , ls(DOWN), DEF)
        LEADER(moveCaretToCodeBlockStartWithSelection, _S _B _S, lc(ls(LBKT)), DEF)
        LEADER(moveCaretToCodeBlockEndWithSelection, _S _B _E, lc(ls(RBKT)), DEF)
            // LEADER(moveCaretToPageTopWithSelection, , lc(ls(PG_UP)), DEF)
            // LEADER(moveCaretToPageBottomWithSelection, , lc(ls(PG_DN)), DEF)
            // LEADER(pageUpWithSelection, , ls(PG_UP), DEF)
            // LEADER(pageDownWithSelection, , ls(PG_DN), DEF)
            // LEADER(moveCaretToTextStartWithSelection, , lc(ls(HOME)), DEF)
            // LEADER(moveCaretToTextEndWithSelection, , lc(ls(END)), DEF)
            // LEADER(extendSelection, , lc(W), DEF)
            // LEADER(shrinkSelection, , lc(ls(W)), DEF)
        
        //  codeFolding:
        // LEADER(expand, _E _X, lc(KP_PLUS), DEF)
        // LEADER(collapse, _C _L, lc(KP_MINUS), DEF)
        LEADER(expandRecursively, _E _X _R, lc(la(KP_PLUS)), DEF)           
        LEADER(collapseRecursively, _C _L _R, lc(la(KP_MINUS)), DEF)
        LEADER(expandAll, _E _X _A, lc(ls(KP_PLUS)), DEF)
        LEADER(collapseAll, _C _L _A, lc(ls(KP_MINUS)), DEF)
        LEADER(foldSelection, , lc(DOT), DEF)
        
        //  multipleCaretsAndSelectionRanges:
            // LEADER(addRemoveCaret, , la(ls(MBTN1)), DEF)
        LEADER(toggleColumnSelectionMode, , la(ls(INS)), DEF)
        LEADER(cloneCaretAbove, , lc(rc(UP)), DEF)
        LEADER(cloneCaretBelow, , lc(rc(DOWN)), DEF)
        LEADER(addCaretToEachLineInSelection, , la(ls(G)), DEF)
        LEADER(addSelectionForNextOccurrence, , la(J), DEF)
        LEADER(selectAllOccurrences, , lc(la(ls(J))), DEF)
        LEADER(deselectLastOccurrence, , la(ls(J)), DEF)
            // LEADER(createRectangularSelection, , la(ls(MBTN2)), DEF)
            // LEADER(dragToCreateRectangularSelection, , la(MBTN1), DEF)
            // LEADER(dragToCreateMultipleRectangularSelections, , lc(la(ls(MBTN1))), DEF)
        
        //  codingAssistance:
        LEADER(showIntentionActions, , la(ENTER), DEF)
        LEADER(basicCompletion, , lc(SPACE), DEF)
        LEADER(typeMatchingCompletion, , lc(ls(SPACE)), DEF)
        LEADER(secondBasicCompletion, , lc(la(SPACE)), DEF)
        LEADER(completeCurrentStatement, , lc(ls(ENTER)), DEF)
        LEADER(reformatCode, , lc(la(L)), DEF)
        LEADER(parameterInfo, , lc(P), DEF)
        LEADER(quickDocumentation, , lc(Q), DEF)
        LEADER(moveStatementUp, , lc(ls(UP)), DEF)
        LEADER(moveStatementDown, , lc(ls(DOWN)), DEF)
        LEADER(moveElementLeft, , lc(la(ls(LEFT))), DEF)
        LEADER(moveStatementRight, , lc(la(ls(RIGHT))), DEF)
        LEADER(moveLineUp, , la(ls(UP)), DEF)
        LEADER(moveLineDown, , la(ls(DOWN)), DEF)
        LEADER(commentWithLineComment, , lc(SLASH), DEF)
        LEADER(commentWithBlockComment, , lc(ls(SLASH)), DEF)
        LEADER(surroundWith, , lc(la(T)), DEF)
        LEADER(generate, , la(INS), DEF)
        
        //  contextNavigation:
        LEADER(nextMethod, , la(DOWN), DEF)
        LEADER(previousMethod, , la(UP), DEF)
        LEADER(goToLineColumn, , lc(G), DEF)
        LEADER(switcher, , lc(TAB), DEF)
        LEADER(selectIn, , la(F1), DEF)
        LEADER(recentFiles, , lc(E), DEF)
        LEADER(lastEditLocation, , lc(ls(BKSPC)), DEF)
        LEADER(back, , lc(la(LEFT)), DEF)
        LEADER(forward, , lc(la(RIGHT)), DEF)
        LEADER(selectNextTab, , la(RIGHT), DEF)
        LEADER(selectPreviousTab, , la(LEFT), DEF)
        LEADER(toggleAnonymousBookmark, , F11, DEF)
        //  LEADER(toggleBookmarkWithDigit, , lc(ls(, DEF)comJetbrainsWebhelpShortcutteryShortcutsKeyCustom1076e435))
        LEADER(toggleBookmarkWithMnemonic, , lc(F11), DEF)
        LEADER(showAllBookmarks, , ls(F11), DEF)
        //  LEADER(goToBookmarkWithDigit, , lc(, DEF)comJetbrainsWebhelpShortcutteryShortcutsKeyCustom22a3022d)
        LEADER(showMnemonicBookmarks, , lc(ls(F11)), DEF)
        LEADER(showBookmarksWindow, , la(N2), DEF)
        LEADER(showStructureWindow, , la(N7), DEF)
        LEADER(showFindWindow, , la(N3), DEF)
        LEADER(nextOccurrence, , lc(la(DOWN)), DEF)
        LEADER(previousOccurrence, , lc(la(UP)), DEF)
        
        //  findEverything:
        LEADER(searchEverywhere, , ls(rs(N2)), DEF)
        LEADER(find, , lc(F), DEF)
        LEADER(findNextMoveToNextOccurrence, , F3, DEF)
        LEADER(findPreviousMoveToPreviousOccurrence, , ls(F3), DEF)
        LEADER(replace, , lc(R), DEF)
        LEADER(findInFiles, , lc(ls(F)), DEF)
        LEADER(replaceInFiles, , lc(ls(R)), DEF)
        LEADER(nextOccurrenceOfTheWordAtCaret, , lc(F3), DEF)
        LEADER(goToFile, , lc(ls(N)), DEF)
        LEADER(fileStructure, , lc(F12), DEF)
        LEADER(goToSymbol, , lc(la(ls(N))), DEF)
        LEADER(findAction, , lc(ls(A)), DEF)
        
        // navigateFromSymbols:
        LEADER(findUsages, , la(F7), DEF)
        LEADER(goToDeclarationOrUsages, , lc(B), DEF)
        LEADER(goToTypeDeclaration, , lc(ls(B)), DEF)
        LEADER(showUsages, , lc(la(F7)), DEF)
        LEADER(goToSuperMethod, , lc(U), DEF)
        LEADER(goToImplementations, , lc(la(B)), DEF)
        LEADER(goToTest, , lc(ls(T)), DEF)
        LEADER(highlightUsagesInFile, , lc(ls(F7)), DEF)
        
        //  codeAnalysis:
        LEADER(showIntentionActions, , la(ENTER), DEF)
        LEADER(errorDescription, , lc(F1), DEF)
        LEADER(nextHighlightedError, , F2, DEF)
        LEADER(previousHighlightedError, , ls(F2), DEF)
        LEADER(runInspectionByName, , lc(la(ls(I))), DEF)
        LEADER(showProblemsWindow, , la(N6), DEF)
        
        //  runAndDebug:
        LEADER(runAnything, , lc(rc(N0)), DEF)
        LEADER(runContextConfiguration, , ls(F10), DEF)
        LEADER(run, , la(ls(F10)), DEF)
        LEADER(debugContextConfiguration, , ls(F9), DEF)
        LEADER(debug, , la(ls(F9)), DEF)
        LEADER(attachToProcess, , lc(la(F5)), DEF)
        LEADER(stop, , lc(F2), DEF)
        LEADER(resumeProgram, , F9, DEF)
        LEADER(stopBackgroundProcesses, , lc(ls(F2)), DEF)
        LEADER(stepOver, , F8, DEF)
        LEADER(forceStepOver, , la(ls(F8)), DEF)
        LEADER(stepInto, , F7, DEF)
        LEADER(smartStepInto, , ls(F7), DEF)
        LEADER(forceStepInto, , la(ls(F7)), DEF)
        LEADER(stepOut, , ls(F8), DEF)
        LEADER(runToCursor, , la(F9), DEF)
        LEADER(forceRunToCursor, , lc(la(F9)), DEF)
        LEADER(showExecutionPoint, , la(F10), DEF)
        LEADER(evaluateExpression, , la(F8), DEF)
        LEADER(quickEvaluateExpression, , lc(la(F8)), DEF)
        LEADER(toggleLineBreakpoint, , lc(F8), DEF)
        LEADER(toggleTemporaryLineBreakpoint, , lc(la(ls(F8))), DEF)
        LEADER(viewBreakpoints, , lc(ls(F8)), DEF)
        LEADER(editBreakpoint, , lc(ls(F8)), DEF)
        LEADER(showRunWindow, , la(N4), DEF)
        LEADER(showDebugWindow, , la(N5), DEF)
        LEADER(showServicesWindow, , la(N8), DEF)
        
        //  refactorings:
        LEADER(refactorThis, , lc(la(ls(T))), DEF)
        LEADER(rename, , ls(F6), DEF)
        LEADER(changeSignature, , lc(F6), DEF)
        LEADER(inline, , lc(la(N)), DEF)
        LEADER(move, , F6, DEF)
        LEADER(extractMethod, , lc(la(M)), DEF)
        LEADER(introduceField, , lc(la(F)), DEF)
        LEADER(introduceParameter, , lc(la(P)), DEF)
        LEADER(introduceVariable, , lc(la(V)), DEF)
        LEADER(safeDelete, , la(DEL), DEF)
        
        //  globalVCSActions:
        LEADER(vcsOperationsPopup, , la(GRV), DEF)
        LEADER(commit, , lc(K), DEF)
        LEADER(updateProject, , lc(T), DEF)
        LEADER(rollback, , lc(la(Z)), DEF)
        LEADER(push, , lc(ls(K)), DEF)
        LEADER(nextChange, , lc(la(ls(DOWN))), DEF)
        LEADER(previousChange, , lc(la(ls(UP))), DEF)
        LEADER(showVersionControlWindow, , la(N9), DEF)
        LEADER(showCommitWindow, , la(N0), DEF)
        
        //  differencesViewer:
        LEADER(showDiff, , lc(D), DEF)
        LEADER(compareFiles, , lc(D), DEF)
        LEADER(nextDifference, , F7, DEF)
        LEADER(previousDifference, , ls(F7), DEF)
        LEADER(acceptLeftSide, , lc(la(R)), DEF)
        LEADER(acceptRightSide, , lc(la(A)), DEF)
        LEADER(selectOppositeDiffPane, , lc(ls(TAB)), DEF)
        LEADER(showDiffSettingsPopup, , lc(ls(D)), DEF)
        
        //  toolWindows:
        LEADER(hideActiveToolWindow, , ls(ESC), DEF)
        LEADER(hideAllToolWindows, , lc(ls(F12)), DEF)
        LEADER(jumpToLastToolWindow, , F12, DEF)
        LEADER(stretchToLeft, , lc(la(ls(LEFT))), DEF)
        LEADER(stretchToRight, , lc(la(ls(RIGHT))), DEF)
        LEADER(stretchToTop, , lc(la(ls(UP))), DEF)
        LEADER(stretchToBottom, , lc(la(ls(DOWN))), DEF)
        LEADER(showProjectWindow, , la(N1), DEF)
        LEADER(showBookmarksWindow, , la(N2), DEF)
        LEADER(showFindWindow, , la(N3), DEF)
        LEADER(showRunWindow, , la(N4), DEF)
        LEADER(showDebugWindow, , la(N5), DEF)
        LEADER(showProblemsWindow, , la(N6), DEF)
        LEADER(showStructureWindow, , la(N7), DEF)
        LEADER(ShowServicesWindow, , la(N8), DEF)
        LEADER(ShowVersionControl, , window la(N9), DEF)
        LEADER(ShowCommitWindow, , la(N0), DEF)
        LEADER(ShowTerminalWindow, , la(F12), DEF)
    };
};